<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="white"/>
    <meta name="msapplication-TileColor" content="#FFFFFF">

    <link rel="manifest" href="/manifest.json">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <title>Hello, world!</title>
  </head>
  <body class="container">
    <h1 class="mt-2">Convert normal text to sans!</h1>
    <div class="form-group">
        <label for="normalText">Masukkan teks anda:</label>
        <textarea type="text" id="normalText" class="form-control" rows="10" cols="20" wrap="off"></textarea>
    </div>
    <div class="form-group">
        <label for="styleText">Style:</label>
        <select name="styleText" id="styleText" class="form-control">
            <option value="reguler">Reguler</option>
            <option value="italic">Italic</option>
            <option value="bold">Bold</option>
        </select>
    </div>
    <div class="form-group">
        <button class="btn btn-danger btn-block" id="btnClear">Clear</button>
    </div>
    <!-- <div class="row form-group">
        <div class="col-6">
            <button class="btn btn-primary btn-block" id="btnConvert">Convert</button>
        </div>
        <div class="col-12">
        </div>
    </div> -->
    <div class="form-group">
        <label for="resultText">Hasil:</label>
        <textarea name="resultText" id="resultText" class="form-control" readonly rows="10" cols="20" wrap="off"></textarea>
    </div>
    <div class="form-group">
        <button class="btn btn-success btn-block" id="btnCopy" disabled>Copy</button>
    </div>
    
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="assets/js/jquery-3.5.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script>
        var btnConvert = $('#btnConvert');
        var btnClear = $('#btnClear');
        var btnCopy = $('#btnCopy');
        var normalText = $('#normalText');
        var resultText = $('#resultText');
        var styleText = $('#styleText');
        function convert(text, styleFont) {
            var result = text;
            const reguler = {
                a: 'ð–º', b: 'ð–»', c: 'ð–¼', d: 'ð–½', e: 'ð–¾', f: 'ð–¿', g: 'ð—€', h: 'ð—', i: 'ð—‚', j: 'ð—ƒ', k: 'ð—„', l: 'ð—…', m: 'ð—†', n: 'ð—‡', o: 'ð—ˆ', p: 'ð—‰', q: 'ð—Š', r: 'ð—‹', s: 'ð—Œ', t: 'ð—', u: 'ð—Ž', v: 'ð—', w: 'ð—', x: 'ð—‘', y: 'ð—’', z: 'ð—“', 
                A: 'ð– ', B: 'ð–¡', C: 'ð–¢', D: 'ð–£', E: 'ð–¤', F: 'ð–¥', G: 'ð–¦', H: 'ð–§', I: 'ð–¨', J: 'ð–©', K: 'ð–ª', L: 'ð–«', M: 'ð–¬', N: 'ð–­', O: 'ð–®', P: 'ð–¯', Q: 'ð–°', R: 'ð–±', S: 'ð–²', T: 'ð–³', U: 'ð–´', V: 'ð–µ', W: 'ð–¶', X: 'ð–·', Y: 'ð–¸', Z: 'ð–¹',
                0: 'ðŸ¢', 1: 'ðŸ£', 2: 'ðŸ¤', 3: 'ðŸ¥', 4: 'ðŸ¦', 5: 'ðŸ§', 6: 'ðŸ¨', 7: 'ðŸ©', 8: 'ðŸª', 9: 'ðŸ«'
            }
            const italic= {
                a: 'ð˜¢', b: 'ð˜£', c: 'ð˜¤', d: 'ð˜¥', e: 'ð˜¦', f: 'ð˜§', g: 'ð˜¨', h: 'ð˜©', i: 'ð˜ª', j: 'ð˜«', k: 'ð˜¬', l: 'ð˜­', m: 'ð˜®', n: 'ð˜¯', o: 'ð˜°', p: 'ð˜±', q: 'ð˜²', r: 'ð˜³', s: 'ð˜´', t: 'ð˜µ', u: 'ð˜¶', v: 'ð˜·', w: 'ð˜¸', x: 'ð˜¹', y: 'ð˜º', z: 'ð˜»', 
                A: 'ð˜ˆ', B: 'ð˜‰', C: 'ð˜Š', D: 'ð˜‹', E: 'ð˜Œ', F: 'ð˜', G: 'ð˜Ž', H: 'ð˜', I: 'ð˜', J: 'ð˜‘', K: 'ð˜’', L: 'ð˜“', M: 'ð˜”', N: 'ð˜•', O: 'ð˜–', P: 'ð˜—', Q: 'ð˜–', R: 'ð˜™', S: 'ð˜š', T: 'ð˜›', U: 'ð˜œ', V: 'ð˜', W: 'ð˜ž', X: 'ð˜Ÿ', Y: 'ð˜ ', Z: 'ð˜¡',
                0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 6: '6', 7: '7', 8: '8', 9: '9'
            }
            const bold = {
                a: 'ð—®', b: 'ð—¯', c: 'ð—°', d: 'ð—±', e: 'ð—²', f: 'ð—³', g: 'ð—´', h: 'ð—µ', i: 'ð—¶', j: 'ð—·', k: 'ð—¸', l: 'ð—¹', m: 'ð—º', n: 'ð—»', o: 'ð—¼', p: 'ð—½', q: 'ð—¾', r: 'ð—¿', s: 'ð˜€', t: 'ð˜', u: 'ð˜‚', v: 'ð˜ƒ', w: 'ð˜„', x: 'ð˜…', y: 'ð˜†', z: 'ð˜‡', 
                A: 'ð—”', B: 'ð—•', C: 'ð—–', D: 'ð——', E: 'ð—˜', F: 'ð—™', G: 'ð—š', H: 'ð—›', I: 'ð—œ', J: 'ð—', K: 'ð—ž', L: 'ð—Ÿ', M: 'ð— ', N: 'ð—¡', O: 'ð—¢', P: 'ð—£', Q: 'ð—¤', R: 'ð—¥', S: 'ð—¦', T: 'ð—§', U: 'ð—¨', V: 'ð—©', W: 'ð—ª', X: 'ð—«', Y: 'ð—¬', Z: 'ð—­',
                0: 'ðŸ¬', 1: 'ðŸ­', 2: 'ðŸ', 3: 'ðŸ‘', 4: 'ðŸ’', 5: 'ðŸ“', 6: 'ðŸ”', 7: 'ðŸ•', 8: 'ðŸ–', 9: 'ðŸ—'
            }
            var style;
            switch(styleFont) {
                case 'reguler':
                    style = reguler;
                    break;
                case 'italic':
                    style = italic;
                    break;
                case 'bold':
                    style = bold;
                    break;
                default:
                    break;
            }
            Object.keys(style).map(listR => {
                const strRegExp = new RegExp(listR, 'g');
                result = result.replace(strRegExp, style[listR]);
            })
            return result;
        }
        function copy(elem) {
            // set focus to hidden element and select the content
            $(elem).focus();
            // select all the text therein  
            $(elem).select();

            var succeed;
            try {
                succeed = document.execCommand("copy");
            } catch(e) {
                succeed = false;
            }

            return succeed;

        }
        // btnConvert.on('click', function() {
        //     resultText.val(convert(normalText.val(), styleText.val()));
        // });
        btnClear.on('click', () => {
            normalText.val('');
            resultText.val('');
        })
        btnCopy.on('click', function() {
            if(copy("#resultText")) {
                btnCopy.html("Text Copied!")
                btnCopy.attr('disabled', 'true');
                setTimeout(function() {
                    btnCopy.html('Copy');
                    btnCopy.removeAttr('disabled')
                }, 1500);
            }else {
                alert('Copy failed')
            }
        })
        var oldNormalText = normalText.val();
        normalText.on('change keyup paste input', function () {
            var currentVal = $(this).val()
            btnCopy.removeAttr('disabled')
            console.log({currentVal, oldNormalText})
            if(currentVal == oldNormalText) {
                return;
            }
            oldNormalText = currentVal;
            resultText.val(convert(currentVal, styleText.val()))
        })
        styleText.on('change', function() {
            var currentStyleText = $(this).val();
            if(!oldNormalText) {
                return;
            }
            resultText.val(convert(oldNormalText, currentStyleText))
        })

        window.onload = () => {
            'use strict';

            if ('serviceWorker' in navigator) {
                navigator.serviceWorker
                        .register('sw.js');
            }
        }
    </script>
  </body>
</html>
